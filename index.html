<!-- Contact Form (backend-powered) -->
<div class="bg-white p-6 rounded-lg shadow-sm w-full max-w-2xl text-sm mb-20">
  <h3 class="text-lg font-bold mb-2 text-center">Need help with your purchase?</h3>
  <p class="text-center text-gray-600 mb-4">We'll respond in under 6 hours.</p>

  <form id="contactForm" class="space-y-3">
    <input type="text" id="name" placeholder="Your name"
           class="w-full border border-gray-300 rounded px-3 py-2 text-sm" required />

    <input type="text" id="vin" placeholder="Vehicle VIN"
           class="w-full border border-gray-300 rounded px-3 py-2 text-sm" required />

    <textarea id="message" placeholder="Your message"
              rows="3" class="w-full border border-gray-300 rounded px-3 py-2 text-sm" required></textarea>

    <button type="submit"
            class="w-full bg-blue-600 text-white py-2 text-sm rounded hover:bg-blue-700 transition">
      Submit Request
    </button>
  </form>

  <p id="formStatus" class="text-center mt-4 text-sm text-green-600 hidden">Your message was sent!</p>
</div>

<script>
  document.getElementById("contactForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const vin = document.getElementById("vin").value.trim();
    const message = document.getElementById("message").value.trim();
    const status = document.getElementById("formStatus");

    try {
      const res = await fetch("https://autovyn-backend.onrender.com/contact", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, vin, message })
      });

      const result = await res.json();
      if (result.success) {
        status.innerText = "Your message was sent!";
        status.classList.remove("hidden");
        e.target.reset();
      } else {
        alert("Something went wrong. Please try again.");
      }
    } catch (err) {
      console.error(err);
      alert("Could not send your message. Please try again later.");
    }
  });
</script>
